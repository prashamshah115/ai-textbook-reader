# 🤖 AI Textbook Reader

An intelligent textbook reading companion powered by AI. Read PDFs with real-time AI summaries, practice questions, contextual connections, and interactive chat.

![Status](https://img.shields.io/badge/status-MVP%20Ready-brightgreen)
![License](https://img.shields.io/badge/license-MIT-blue)

---

## ✨ Features

### 📖 Smart Reading Experience
- **PDF Viewer** with zoom, navigation, and text selection
- **Real-time Notes** with auto-save and Markdown support
- **Keyboard Shortcuts** for efficient navigation (j/k for pages, n for notes)

### 🧠 AI-Powered Learning
- **Page Summaries** generated by local AI model
- **Key Concepts** extraction with explanations
- **Connections** between current and previous pages
- **Real-world Applications** of concepts
- **Practice Questions** tailored to your level
- **Interactive Chat** with GPT-4 for deep explanations

### 🔒 Secure & Private
- **Whitelist Authentication** - control who has access
- **User Isolation** - each user sees only their data
- **Row-Level Security** via Supabase
- **No Public Signup** - invite-only by default

### 💡 Smart Personalization
- Set your **learning goals** and AI adapts
- Choose experience level: beginner, intermediate, or advanced
- Customize summary style: concise, detailed, or bullet-points
- Define AI personality to match your learning style

---

## 🏗️ Architecture

```
Frontend (React + Vite)
├─ Authentication (Supabase Auth + Whitelist)
├─ State Management (React Context)
├─ UI Components (shadcn/ui + Radix UI)
└─ Real-time Sync (Supabase Realtime)

Backend (Supabase)
├─ PostgreSQL Database
│  ├─ Users & Preferences
│  ├─ Textbooks & Pages
│  ├─ AI Processed Content
│  ├─ User Notes
│  └─ Chat Conversations
├─ Row-Level Security (RLS)
└─ File Storage (PDFs)

AI Layer
├─ Local Model (Ollama/Mistral)
│  ├─ Page Summaries
│  ├─ Key Concepts
│  ├─ Applications
│  └─ Practice Questions
└─ OpenAI GPT-4
   └─ Interactive Chat

Deployment (Vercel)
├─ Edge Functions (API routes)
├─ Auto SSL
└─ Global CDN
```

---

## 🚀 Quick Start

### Prerequisites
- Node.js 18+
- Supabase account
- OpenAI API key
- (Optional) Ollama for local AI

### 1. Clone & Install
```bash
cd "AI Textbook Reader Design"
npm install
```

### 2. Set Up Database
1. Create project at [supabase.com](https://supabase.com)
2. Run `supabase-schema.sql` in SQL Editor
3. Add your email to whitelist:
   ```sql
   INSERT INTO allowed_users (email, role) VALUES ('you@example.com', 'admin');
   ```

### 3. Configure Environment
Create `.env`:
```bash
VITE_SUPABASE_URL=https://xxx.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_KEY=your_service_key
OPENAI_API_KEY=sk-your-key
```

### 4. Run Locally
```bash
npm run dev
```

Open [http://localhost:5173](http://localhost:5173)

### 5. Deploy to Production
See [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md) for complete instructions.

---

## 📚 Usage

### Adding Textbooks
1. Upload PDF to Supabase Storage
2. Insert record in `textbooks` table
3. Extract pages with PDF parser
4. Process with local AI model

### Taking Notes
- Type directly in left panel
- Auto-saves every second
- Markdown supported
- Syncs across devices

### AI Features
- **Summaries** - Auto-generated on page load
- **Chat** - Ask questions about current page
- **Questions** - Practice to test understanding
- **Applications** - See real-world use cases

### Keyboard Shortcuts
- `j` - Next page
- `k` - Previous page
- `n` - Focus notes
- `r` - Regenerate AI content
- `Ctrl+S` - Save notes

---

## 🛠️ Tech Stack

### Frontend
- **React 18** - UI library
- **TypeScript** - Type safety
- **Vite** - Build tool & dev server
- **TailwindCSS** - Styling
- **shadcn/ui** - Component library
- **Radix UI** - Headless components
- **React Query** - Server state management
- **Sonner** - Toast notifications

### Backend
- **Supabase** - Backend as a Service
  - PostgreSQL database
  - Authentication
  - Real-time subscriptions
  - File storage
  - Row-Level Security

### AI/ML
- **Ollama** - Local LLM runtime
- **OpenAI API** - GPT-4 for chat
- **LangChain** (future) - RAG pipeline

### Deployment
- **Vercel** - Hosting & serverless functions
- **Edge Functions** - API routes
- **GitHub** - Version control

---

## 📁 Project Structure

```
src/
├── components/
│   ├── auth/           # Login, ProtectedRoute
│   ├── ai-panels/      # Summary, Chat, Recall
│   ├── ui/             # shadcn/ui components
│   ├── MinimalHeader   # Top navigation
│   ├── NotesPanel      # Left sidebar
│   ├── PDFReader       # Center panel
│   └── MinimalAIPane   # Right sidebar
├── contexts/
│   ├── AuthContext     # Authentication state
│   ├── TextbookContext # Textbook & page data
│   ├── NotesContext    # Notes management
│   └── ChatContext     # Chat messages
├── lib/
│   ├── supabase        # Supabase client
│   ├── queryClient     # React Query config
│   └── ai/
│       ├── prompts     # System prompts
│       └── localModel  # Local AI integration
├── App.tsx             # Main app component
└── main.tsx            # Entry point

api/
├── chat.ts             # OpenAI chat endpoint
└── process-page.ts     # Trigger AI processing

supabase-schema.sql     # Database schema
vercel.json             # Vercel config
DEPLOYMENT_GUIDE.md     # Step-by-step deployment
```

---

## 🔐 Security

- ✅ **Row-Level Security** - Users can only see their data
- ✅ **Whitelist Auth** - No public signups
- ✅ **API Key Protection** - Server-side keys never exposed
- ✅ **HTTPS Only** - Auto SSL via Vercel
- ✅ **Input Validation** - All user inputs sanitized

---

## 💰 Cost Breakdown (10 users)

| Service | Free Tier | Paid (if needed) |
|---------|-----------|------------------|
| Supabase | 500MB DB, 1GB storage | $25/mo |
| Vercel | 100GB bandwidth | $20/mo |
| OpenAI | Pay per use | ~$10-30/mo |
| Ollama | Free (self-hosted) | - |
| **Total** | **~$0-10/mo** | **~$55-75/mo** |

---

## 🗺️ Roadmap

### MVP (Current)
- [x] Authentication with whitelist
- [x] PDF reading with notes
- [x] AI summaries & key concepts
- [x] Interactive chat
- [x] Vercel deployment

### v1.1 (Next)
- [ ] Real PDF.js rendering (not just text)
- [ ] Batch PDF upload & processing
- [ ] Search across textbook
- [ ] Export notes as Markdown/PDF
- [ ] User preferences UI

### v1.2 (Future)
- [ ] Collaborative notes (share with friends)
- [ ] Spaced repetition flashcards
- [ ] Progress tracking & analytics
- [ ] Mobile app (React Native)
- [ ] Voice chat with AI

### v2.0 (Advanced)
- [ ] RAG with vector embeddings
- [ ] Multi-document cross-references
- [ ] AI tutor sessions (scheduled)
- [ ] Subscription tiers & payments
- [ ] Admin dashboard

---

## 🤝 Contributing

Currently in MVP phase. If you'd like to contribute:

1. Fork the repository
2. Create feature branch: `git checkout -b feature-name`
3. Commit changes: `git commit -m 'Add feature'`
4. Push to branch: `git push origin feature-name`
5. Open a Pull Request

---

## 📄 License

MIT License - feel free to use for personal or commercial projects.

---

## 🙏 Acknowledgments

Built with:
- [Supabase](https://supabase.com) - Backend infrastructure
- [Vercel](https://vercel.com) - Deployment platform
- [OpenAI](https://openai.com) - GPT-4 API
- [Ollama](https://ollama.ai) - Local LLM runtime
- [shadcn/ui](https://ui.shadcn.com) - Component library
- [Radix UI](https://radix-ui.com) - Headless UI primitives

Originally designed in Figma, converted to production-ready React app.

---

## 📞 Support

Need help?
- Review [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md)
- Check browser console for errors
- Verify environment variables
- Test API endpoints individually

---

**Built with ❤️ for learners who want AI-powered reading experiences.**

*Transform your textbook reading from passive to active learning.*
